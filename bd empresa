import sqlite3
import hashlib

conexao = sqlite3.connect('crajubar.db')
cursor = conexao.cursor()

#EMPRESA

conexao = sqlite3.connect('crajubar.db')
cursor = conexao.cursor()
cursor.execute('''CREATE TABLE IF NOT EXISTS empresa (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            nome TEXT NOT NULL,
            email TEXT NOT NULL,
            password TEXT NOT NULL,
            tipoEmp TEXT NOT NULL
            )''')
conexao.commit()
conexao.close()

    

def adicionarEmp(nome, email, password, tipoEmp):
    hashlib.sha256(password.encode()).hexdigest()
    
    try:
        conexao = sqlite3.connect('crajubar.db')
        cursor = conexao.cursor()
        cursor.execute('''INSERT INTO empresa(nome, email, password, tipoEmp) VALUES (?, ?, ?, ?)''', (nome, email, password, tipoEmp))
        conexao.commit()
    
        print("Empresa cadastrda com sucesso!")
    except sqlite3.IntegrityError:
        print("Erro: O email já está cadastrado.")
    finally:
        conexao.close()    
    conexao.close()

def checar_Emp(email, password):
    hashlib.sha256(password.encode()).hexdigest()

    conexao = sqlite3.connect('crajubar.db')
    cursor = conexao.cursor()

    cursor.execute('''Select * FROM empresa WHERE email = ? AND password = ?''', (email, password))
    user = cursor.fetchone

    conexao.close()

    if user:
        return True
    else:
        return False


def loginEmp(email, senha):

    if checar_Emp(email,senha):
        print("Login realizado com sucesso!")
        return True
    else:
        print("Email ou senha incorretos.")
        return False





def listarEmp():
    conexao = sqlite3.connect('crajubar.db')
    cursor = conexao.cursor()
    cursor.execute('''SELECT * FROM usuarios''')
    usuarios = cursor.fetchall()
    for user in usuarios:
        print(user)
    conexao.close()

#EMPRESA


